import{H as i,r as d}from"./index-CXWT5NW2.js";let s=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((a,o)=>(o&=63,o<36?a+=o.toString(36):o<62?a+=(o-26).toString(36).toUpperCase():o>62?a+="-":a+="_",a),"");const p=i("order",()=>{const r=d([]);return{orders:r,createOrder:t=>{const e=Date.now(),n={id:s(),orderNo:"NO"+e,...t,status:"unpaid",createTime:new Date(e).toISOString(),payTime:null,cancelTime:null,expireTime:e+3*60*1e3};return r.value.unshift(n),n.id},payOrder:({orderId:t})=>{const e=r.value.find(n=>n.id===t);e&&(e.status="paid",e.payTime=new Date().toISOString()),console.log("payOrder called with orderId:",t,"orders:",r.value)},cancelOrder:t=>{const e=r.value.find(n=>n.id===t);e&&(e.status="cancelled",e.cancelTime=new Date().toISOString())},getOrderDetail:t=>r.value.find(e=>e.id===t),removeOrder:t=>{const e=r.value.findIndex(n=>n.id===t);e!==-1&&r.value.splice(e,1)}}},{persist:!0});export{p as u};
