import{_ as h}from"./logo2-i0hRRQT6.js";import{_ as L,r as _,a as B,c as C,b as t,d as o,w as s,e as a,u as E,o as F,f,g as N,l as R,h as g,t as S,E as c}from"./index-CXWT5NW2.js";import{useUserStore as U}from"./user-DnAwSLmC.js";const q={class:"auth-container"},z={class:"auth-box"},A={class:"auth-footer"},D={__name:"Login",setup(I){const v=E(),b=U(),n=_(null),l=_(!1),r=B({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符之间",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,message:"用户名只能包含字母、数字、下划线和中文",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]},x=async()=>{if(n.value)try{await n.value.validate(),l.value=!0,await b.login(r.username,r.password),c.success("登录成功"),v.push("/home")}catch(m){c.error(m.message||"登录失败")}finally{l.value=!1}};return(m,e)=>{const d=a("el-icon"),p=a("el-input"),u=a("el-form-item"),V=a("el-button"),y=a("el-form"),k=a("router-link");return F(),C("div",q,[e[5]||(e[5]=t("div",{class:"logo"},[t("img",{src:h,alt:"Logo"})],-1)),t("div",z,[e[4]||(e[4]=t("h2",null,"登录淘淘账号",-1)),o(y,{model:r,rules:w,ref_key:"loginFormRef",ref:n},{default:s(()=>[o(u,{prop:"username"},{default:s(()=>[o(p,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=i=>r.username=i),placeholder:"用户名"},{prefix:s(()=>[o(d,null,{default:s(()=>[o(f(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{prop:"password"},{default:s(()=>[o(p,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=i=>r.password=i),type:"password",placeholder:"密码"},{prefix:s(()=>[o(d,null,{default:s(()=>[o(f(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:s(()=>[o(V,{type:"primary",class:"submit-btn",loading:l.value,onClick:x},{default:s(()=>[g(S(l.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",A,[o(k,{to:"/register"},{default:s(()=>e[2]||(e[2]=[g("注册账号")])),_:1}),e[3]||(e[3]=t("a",{href:"#"},"忘记密码?",-1))])])])}}},$=L(D,[["__scopeId","data-v-dbfbe6f0"]]);export{$ as default};
