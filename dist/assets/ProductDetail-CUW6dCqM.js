import{_ as W,k as Y,p as j,r as h,v as Z,B as $,c,b as t,C as ee,d as a,w as l,e as i,t as d,m as B,h as m,F as y,i as x,E as b,u as te,o as r,f as C,D as se,G as ae,g as oe,j as D}from"./index-CXWT5NW2.js";import{u as le}from"./product-BR45Oadz.js";import{u as ne}from"./order-CyT1VBxf.js";const ie={class:"product-detail"},re={class:"detail-nav"},ue={class:"nav-content"},ce={class:"nav-right"},de={class:"detail-container"},pe={class:"product-gallery"},_e={class:"product-info"},me={class:"description"},ve={class:"price-section"},ge={class:"current-price"},fe={key:0,class:"original-price"},he={class:"specs-section"},ye={class:"spec-title"},xe={class:"spec-options"},be={class:"quantity-section"},ke={class:"action-buttons"},Ve={class:"detail-content"},Ce=["innerHTML"],De={class:"reviews-list"},we={class:"review-content"},Se={class:"review-header"},Ie={class:"username"},Ne={class:"review-text"},Pe={key:0,class:"review-images"},je={class:"review-time"},Be={__name:"ProductDetail",setup(Te){const T=$(),w=te(),S=Y(),U=j(()=>S.cartCount),k=h(1),q=ne();j(()=>q.orders);const V=h(["/product/xiaoxin4.avif","/product/xiaoxin5.avif","/product/xiaoxin1.jpg","/product/xiaoxin2.jpg","/product/xiaoxin3.jpg"]),o=h({id:1,name:"小新Pro16",description:"16英寸大屏轻薄本",price:5999,originalPrice:6999,image:"/Images/xiaoxin-pro16.jpg",category:"电脑办公",detail:`
    <h3>产品参数</h3>
    <p>处理器：第13代英特尔® Core™ i5-13500H</p>
    <p>显卡：NVIDIA® GeForce® RTX™ 4050</p>
    <p>内存：16GB</p>
    <p>存储：512GB SSD</p>
    <p>屏幕：16英寸 2.5K 165Hz</p>
  `}),z=h([{id:1,userName:"张三",userAvatar:"/Images/avatar1.jpg",rating:5,content:"非常好用的笔记本，性能强劲，散热出色！",images:["/Images/review1.jpg","/Images/review2.jpg"],time:"2024-03-15"}]),p=h({}),A=()=>{var n;(n=o.value)!=null&&n.specs&&o.value.specs.forEach(e=>{e.options&&e.options.length>0?p.value[e.name]=e.options[0]:p.value[e.name]=""})},E=()=>{var e;const n=(e=o.value.specs)==null?void 0:e.filter(_=>!p.value[_.name]);if((n==null?void 0:n.length)>0){b.warning("请选择商品规格");return}S.addToCart(o.value,k.value,p.value),b.success("成功加入购物车！")},G=()=>{var e,_;const n=(e=o.value.specs)==null?void 0:e.filter(f=>!p.value[f.name]);if((n==null?void 0:n.length)>0){b.warning("请选择商品规格");return}w.push({path:"/order/confirm",query:{productId:o.value.id,name:o.value.name,price:o.value.price,quantity:k.value,specs:JSON.stringify(p.value),image:o.value.image||((_=o.value.images)==null?void 0:_[0])}})},g=le(),H=async n=>{try{await g.getProductDetail(n),g.productDetail?(o.value=g.productDetail,g.productDetail.images&&(V.value=g.productDetail.images),o.value.specs||(o.value.specs=[]),A()):(b.error("商品不存在"),w.push("/home"))}catch(e){b.error("获取商品详情失败"),console.error("获取商品详情失败:",e)}};return Z(()=>{const n=T.params.id;H(n)}),(n,e)=>{const _=i("el-icon"),f=i("router-link"),M=i("el-badge"),I=i("el-image"),F=i("el-carousel-item"),L=i("el-carousel"),R=i("el-radio"),O=i("el-radio-group"),J=i("el-input-number"),N=i("el-button"),P=i("el-tab-pane"),K=i("el-avatar"),X=i("el-rate"),Q=i("el-tabs");return r(),c("div",ie,[e[10]||(e[10]=t("div",{class:"background-image"},null,-1)),t("div",re,[t("div",ue,[e[4]||(e[4]=t("div",{class:"nav-left"},[t("div",{class:"logo"},[t("img",{src:ee,alt:"淘淘商城"})])],-1)),t("div",ce,[a(f,{to:"/",class:"nav-item"},{default:l(()=>[a(_,null,{default:l(()=>[a(C(se))]),_:1}),e[1]||(e[1]=m(" 首页 "))]),_:1}),a(f,{to:"/cart",class:"nav-item"},{default:l(()=>[a(M,{value:U.value,class:"cart-badge"},{default:l(()=>[a(_,null,{default:l(()=>[a(C(ae))]),_:1}),e[2]||(e[2]=m(" 购物车 "))]),_:1},8,["value"])]),_:1}),a(f,{to:"/user",class:"nav-item"},{default:l(()=>[a(_,null,{default:l(()=>[a(C(oe))]),_:1}),e[3]||(e[3]=m(" 个人中心 "))]),_:1})])])]),t("div",de,[t("div",pe,[a(L,{class:"gallery-carousel",trigger:"click","indicator-position":"outside"},{default:l(()=>[(r(!0),c(y,null,x(V.value,(s,u)=>(r(),D(F,{key:u},{default:l(()=>[a(I,{src:s,"preview-src-list":V.value,fit:"contain",class:"main-image"},null,8,["src","preview-src-list"])]),_:2},1024))),128))]),_:1})]),t("div",_e,[t("h1",null,d(o.value.name),1),t("p",me,d(o.value.description),1),t("div",ve,[t("div",ge,"¥"+d(o.value.price),1),o.value.originalPrice?(r(),c("div",fe,[e[5]||(e[5]=m(" 原价：")),t("span",null,"¥"+d(o.value.originalPrice),1)])):B("",!0)]),t("div",he,[e[6]||(e[6]=t("h3",null,"规格选择",-1)),(r(!0),c(y,null,x(o.value.specs,s=>(r(),c("div",{key:s.name,class:"spec-group"},[t("div",ye,d(s.name),1),t("div",xe,[a(O,{modelValue:p.value[s.name],"onUpdate:modelValue":u=>p.value[s.name]=u},{default:l(()=>[(r(!0),c(y,null,x(s.options,u=>(r(),D(R,{key:u,value:u},{default:l(()=>[m(d(u),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])]))),128))]),t("div",be,[e[7]||(e[7]=t("h3",null,"购买数量",-1)),a(J,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),min:1,max:99,size:"large"},null,8,["modelValue"])]),t("div",ke,[a(N,{type:"primary",size:"large",onClick:E},{default:l(()=>e[8]||(e[8]=[m("加入购物车")])),_:1}),a(N,{type:"danger",size:"large",onClick:G},{default:l(()=>e[9]||(e[9]=[m("立即购买")])),_:1})])])]),t("div",Ve,[a(Q,null,{default:l(()=>[a(P,{label:"商品详情"},{default:l(()=>[t("div",{class:"rich-text-content",innerHTML:o.value.detail},null,8,Ce)]),_:1}),a(P,{label:"用户评价"},{default:l(()=>[t("div",De,[(r(!0),c(y,null,x(z.value,s=>{var u;return r(),c("div",{class:"review-item",key:s.id},[a(K,{src:s.userAvatar},{default:l(()=>{var v;return[m(d((v=s.userName)==null?void 0:v.charAt(0)),1)]}),_:2},1032,["src"]),t("div",we,[t("div",Se,[t("span",Ie,d(s.userName),1),a(X,{modelValue:s.rating,"onUpdate:modelValue":v=>s.rating=v,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),t("p",Ne,d(s.content),1),(u=s.images)!=null&&u.length?(r(),c("div",Pe,[(r(!0),c(y,null,x(s.images,v=>(r(),D(I,{key:v,src:v,"preview-src-list":s.images,class:"review-image"},null,8,["src","preview-src-list"]))),128))])):B("",!0),t("span",je,d(s.time),1)])])}),128))])]),_:1})]),_:1})])])}}},Ae=W(Be,[["__scopeId","data-v-be43e03d"]]);export{Ae as default};
