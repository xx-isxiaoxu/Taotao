import{_ as R}from"./logo2-i0hRRQT6.js";import{_ as E,r as _,a as U,c as h,b as a,d as r,w as s,e as l,u as q,o as B,f,g as C,l as g,h as c,t as F,E as w}from"./index-CXWT5NW2.js";import{useUserStore as N}from"./user-DnAwSLmC.js";const S={class:"auth-container"},D={class:"auth-box"},I={class:"auth-footer"},L={__name:"Register",setup(M){const v=q(),V=N(),d=_(null),u=_(!1),o=U({username:"",password:"",confirmPassword:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(m,e,t)=>{e!==o.password?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]},x=async()=>{d.value&&await d.value.validate(async m=>{if(m){u.value=!0;try{await V.register(o.username,o.password),w.success("注册成功"),v.push("/home")}catch(e){w.error(e.message)}finally{u.value=!1}}})};return(m,e)=>{const t=l("el-icon"),p=l("el-input"),i=l("el-form-item"),y=l("el-button"),P=l("el-form"),k=l("router-link");return B(),h("div",S,[e[6]||(e[6]=a("div",{class:"logo"},[a("img",{src:R,alt:"Logo"})],-1)),a("div",D,[e[5]||(e[5]=a("h2",null,"注册淘淘账号",-1)),r(P,{model:o,rules:b,ref_key:"registerFormRef",ref:d},{default:s(()=>[r(i,{prop:"username"},{default:s(()=>[r(p,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.username=n),placeholder:"用户名"},{prefix:s(()=>[r(t,null,{default:s(()=>[r(f(C))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(i,{prop:"password"},{default:s(()=>[r(p,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),type:"password",placeholder:"密码"},{prefix:s(()=>[r(t,null,{default:s(()=>[r(f(g))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(i,{prop:"confirmPassword"},{default:s(()=>[r(p,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=n=>o.confirmPassword=n),type:"password",placeholder:"确认密码"},{prefix:s(()=>[r(t,null,{default:s(()=>[r(f(g))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(i,null,{default:s(()=>[r(y,{type:"primary",class:"submit-btn",loading:u.value,onClick:x},{default:s(()=>[c(F(u.value?"注册中...":"注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a("div",I,[e[4]||(e[4]=a("span",null,"已有账号？",-1)),r(k,{to:"/login"},{default:s(()=>e[3]||(e[3]=[c("立即登录")])),_:1})])])])}}},G=E(L,[["__scopeId","data-v-aa93f58a"]]);export{G as default};
