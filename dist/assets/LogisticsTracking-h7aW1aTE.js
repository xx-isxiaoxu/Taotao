import{H as x,_ as h,r as S,v as y,x as B,c as m,o as c,b as e,d as A,w as v,F as C,i as T,j as w,t as d,q as I,e as k,B as N,p as b,m as f,u as V,h as $}from"./index-CXWT5NW2.js";const q=(n,o="")=>Promise.resolve({orderId:n,status:"运输中",from:"北京市朝阳区望京SOHO",to:o||"上海市浦东新区张江高科",current:"上海转运中心",steps:[{time:"2024-05-13 10:00",desc:"包裹已揽收"},{time:"2024-05-14 08:00",desc:"到达北京转运中心"},{time:"2024-05-15 12:00",desc:"到达上海转运中心"}]}),D=x("logistics",{state:()=>({logisticsInfo:null}),actions:{async fetchLogistics(n,o){const a=await q(n,o);this.logisticsInfo=a}}}),R={class:"logistics-map"},z={__name:"LogisticsMap",props:{from:String,to:String},setup(n){const o=n,a=S(null),l=()=>{window.AMap&&(a.value=new window.AMap.Map("amap-container",{zoom:6,center:[116.397428,39.90923]}),window.AMap.plugin("AMap.Geocoder",function(){const t=new window.AMap.Geocoder;t.getLocation(o.from,(i,r)=>{if(i==="complete"&&r.geocodes.length){const u=r.geocodes[0].location;t.getLocation(o.to,(s,g)=>{if(s==="complete"&&g.geocodes.length){const p=g.geocodes[0].location;window.AMap.plugin("AMap.Driving",function(){new window.AMap.Driving({map:a.value}).search(u,p),new window.AMap.Marker({map:a.value,position:u,title:"发货地",icon:"https://webapi.amap.com/theme/v1.3/markers/n/start.png"}),new window.AMap.Marker({map:a.value,position:p,title:"收货地",icon:"https://webapi.amap.com/theme/v1.3/markers/n/end.png"})})}})}})}))};return y(()=>{l()}),B(()=>[o.from,o.to],()=>{l()}),(t,i)=>(c(),m("div",R,i[0]||(i[0]=[e("div",{id:"amap-container",class:"map-container"},null,-1)])))}},F=h(z,[["__scopeId","data-v-90e15689"]]),G={class:"logistics-tracker"},H={__name:"LogisticsTracker",props:{steps:{type:Array,default:()=>[]}},setup(n){return(o,a)=>{const l=k("el-timeline-item"),t=k("el-timeline");return c(),m("div",G,[A(t,null,{default:v(()=>[(c(!0),m(C,null,T(n.steps,(i,r)=>(c(),w(l,{key:r,timestamp:i.time,color:r===n.steps.length-1?"#ff69b4":"#e1bee7",placement:"top"},{default:v(()=>[e("span",{class:I(["desc",{active:r===n.steps.length-1}])},d(i.desc),3)]),_:2},1032,["timestamp","color"]))),128))]),_:1})])}}},O=h(H,[["__scopeId","data-v-e6a4594b"]]),j={class:"logistics-tracking-page"},E={class:"logistics-header"},P={class:"address-info"},J={class:"address"},K={class:"address"},Q={class:"order-status"},U={key:0,class:"current-node"},W={__name:"LogisticsTracking",setup(n){const o=N(),a=V(),l=D();y(()=>{const u=o.query.to;l.fetchLogistics(o.query.orderId,u)});const t=b(()=>l.logisticsInfo),i=b(()=>t.value?t.value.status==="运输中"?"status-in-transit":t.value.status==="已签收"?"status-finished":"":""),r=()=>{window.history.length>1?a.back():a.push("/user?tab=orders")};return(u,s)=>{var p,_,L,M;const g=k("el-button");return c(),m("div",j,[e("div",E,[A(g,{type:"primary",onClick:r,class:"back-btn"},{default:v(()=>s[0]||(s[0]=[$("返回")])),_:1}),s[5]||(s[5]=e("h2",null,"物流跟踪",-1)),e("div",P,[s[1]||(s[1]=e("span",null,"发货地：",-1)),e("span",J,d((p=t.value)==null?void 0:p.from),1),s[2]||(s[2]=e("span",{style:{margin:"0 12px"}},"→",-1)),s[3]||(s[3]=e("span",null,"收货地：",-1)),e("span",K,d((_=t.value)==null?void 0:_.to),1)]),e("div",Q,[s[4]||(s[4]=e("span",{class:"status-label"},"当前状态：",-1)),e("span",{class:I(["status-value",i.value])},d(((L=t.value)==null?void 0:L.status)||"--"),3),(M=t.value)!=null&&M.current?(c(),m("span",U,"（"+d(t.value.current)+"）",1)):f("",!0)])]),t.value?(c(),w(F,{key:0,from:t.value.from,to:t.value.to},null,8,["from","to"])):f("",!0),t.value?(c(),w(O,{key:1,steps:t.value.steps},null,8,["steps"])):f("",!0)])}}},Y=h(W,[["__scopeId","data-v-b2caabdf"]]);export{Y as default};
